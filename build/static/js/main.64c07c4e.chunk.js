(this.webpackJsonpview=this.webpackJsonpview||[]).push([[0],{124:function(e,t,a){},126:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(32),c=a.n(o),s=a(10),l=a(133),i=a(139),d=a(26),u=a(51),p=a(135),m=a(25),g=a(129),f={display:"flex",justifyContent:"center",padding:"50px"},h=function(){return r.a.createElement("div",{style:f},r.a.createElement(g.a,{animation:"border",as:"div"}))},E={color:"red",textAlign:"center",padding:"10px"},b={width:"600px",backgroundColor:"#fff",padding:"20px",borderRadius:"5px",margin:"100px auto"},x={textTransform:"uppercase",color:"#303030",margin:"20px 0 40px",textAlign:"center"},y={display:"block",textAlign:"center"},k=function(e){var t=e.values,a=e.touched,n=e.errors,o=e.handleChange,c=e.handleBlur,s=e.handleSubmit,l=e.status,u=e.isAuth,g=Object(d.e)();return(u||l)&&g.push("/"),null===u?r.a.createElement(h,null):r.a.createElement("div",{style:b},r.a.createElement(p.a,{noValidate:!0,onSubmit:s},r.a.createElement("h2",{style:x},"Sign In"),r.a.createElement(p.a.Group,{controlId:"formBasicUsername"},r.a.createElement(p.a.Control,{name:"username",type:"text",placeholder:"Username",value:t.username,onChange:o,onBlur:c,isValid:a.username&&!n.username,isInvalid:!!n.username&&!!a.username}),r.a.createElement(p.a.Control.Feedback,{type:"invalid"},n.username)),r.a.createElement(p.a.Group,{controlId:"formBasicPassword"},r.a.createElement(p.a.Control,{name:"password",type:"password",placeholder:"Password",value:t.password,onChange:o,onBlur:c,isValid:a.password&&!n.password,isInvalid:!!n.password&&!!a.password}),r.a.createElement(p.a.Control.Feedback,{type:"invalid"},n.password)),r.a.createElement(i.a,{variant:"primary",type:"submit"},"Sign In"),n.common&&r.a.createElement("p",{style:E},n.common),r.a.createElement(m.b,{to:"/signup",style:y},"Or create new account")))},v=a(28),j=a.n(v),w={setToken:function(e){localStorage.setItem("accessToken",e.accessToken),localStorage.setItem("refreshToken",e.refreshToken)},getAccessToken:function(){return localStorage.getItem("accessToken")},getRefreshToken:function(){return localStorage.getItem("refreshToken")},clearToken:function(){localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken")}};j.a.defaults.baseURL="http://localhost:3000",j.a.defaults.headers.common.Authorization="Bearer "+w.getAccessToken(),j.a.interceptors.response.use((function(e){return e}),(function(e){var t=e.config;return 401!==e.response.status||t._retry?Promise.reject(e):(t._retry=!0,j.a.post("/refresh-tokens",{refreshToken:w.getRefreshToken()}).then((function(e){if(201===e.status)return w.setToken(e.data),j.a.defaults.headers.common.Authorization="Bearer "+w.getAccessToken(),j()(t)})))}));var O=j.a,S=Object(u.a)({mapPropsToValues:function(){return{username:"",password:""}},validate:function(e){var t={};return e.username||(t.username="Required"),e.password||(t.password="Required"),t},handleSubmit:function(e,t){var a=t.setErrors,n=t.setStatus,r=t.props;(function(e){return O.post("/signin",e).then((function(e){return w.setToken(e.data.tokens),O.defaults.headers.common.Authorization="Bearer "+e.data.tokens.accessToken,e.data.username}))})(e).then((function(e){r.setIsAuth(e),n(!0)})).catch((function(e){a({common:"Wrong credentials!"})}))},displayName:"SignInForm"})(k),T={width:"600px",backgroundColor:"#fff",padding:"50px",borderRadius:"5px",margin:"100px auto",textAlign:"center",color:"#303030"},I=function(){return r.a.createElement("div",{style:T},r.a.createElement("h3",null,"Your account succefuly created!"),r.a.createElement("p",null,"You will be automatically redirected to the login page."))},C={color:"red",textAlign:"center",padding:"10px"},R={width:"600px",backgroundColor:"#fff",padding:"20px",borderRadius:"5px",margin:"100px auto"},A={textTransform:"uppercase",color:"#303030",margin:"20px 0 40px",textAlign:"center"},P={display:"block",textAlign:"center"},B=function(e){var t=Object(d.e)(),a=e.values,n=e.touched,o=e.errors,c=e.handleChange,s=e.handleBlur,l=e.handleSubmit,u=e.status,g=e.isAuth;return g&&t.push("/"),u?(setTimeout((function(){t.push("/signin")}),2e3),r.a.createElement(I,null)):null===g?r.a.createElement(h,null):r.a.createElement("div",{style:R},r.a.createElement(p.a,{noValidate:!0,onSubmit:l},r.a.createElement("h2",{style:A},"Sign Up"),r.a.createElement(p.a.Group,{controlId:"formBasicUsername"},r.a.createElement(p.a.Control,{name:"username",type:"text",placeholder:"Username",value:a.username,onChange:c,onBlur:s,isValid:n.username&&!o.username,isInvalid:!!o.username&&!!n.username}),r.a.createElement(p.a.Control.Feedback,{type:"invalid"},o.username)),r.a.createElement(p.a.Group,{controlId:"formBasicPassword"},r.a.createElement(p.a.Control,{name:"password",type:"password",placeholder:"Password",value:a.password,onChange:c,onBlur:s,isValid:n.password&&!o.password,isInvalid:!!o.password&&!!n.password}),r.a.createElement(p.a.Control.Feedback,{type:"invalid"},o.password)),r.a.createElement(p.a.Group,{controlId:"formBasicPassword"},r.a.createElement(p.a.Control,{name:"passwordRepeat",type:"password",placeholder:"Repeat password",value:a.passwordRepeat,onChange:c,onBlur:s,isValid:n.passwordRepeat&&!o.passwordRepeat,isInvalid:!!o.passwordRepeat&&!!n.passwordRepeat}),r.a.createElement(p.a.Control.Feedback,{type:"invalid"},o.passwordRepeat)),r.a.createElement(i.a,{variant:"primary",type:"submit"},"Sign Up"),o.common&&r.a.createElement("p",{style:C},o.common),r.a.createElement(m.b,{to:"/signin",style:P},"Or sign in")))},z=Object(u.a)({mapPropsToValues:function(){return{username:"",password:"",passwordRepeat:""}},validate:function(e){var t={};return e.username||(t.username="Required"),e.username.length>20&&(t.username="username should contain no more than 20 characters"),e.password?e.password.length<6&&(t.password="password should contain at least 6 characters"):t.password="Required",e.passwordRepeat?e.passwordRepeat!==e.password&&(t.passwordRepeat="Passwords do not match"):t.passwordRepeat="Required",t},handleSubmit:function(e,t){var a=t.setErrors,n=t.setStatus;t.props;O.post("/signup",{username:e.username,password:e.password,passwordRepeat:e.passwordRepeat}).then((function(e){console.log(1,e),n(!0)})).catch((function(e){console.log(2,e.status),a({common:"Sign up error!"})}))},displayName:"SignUpForm"})(B),N=a(16),F=a(31),D=a(132),L=a(89),V=a(42),H=a(140),U=a(131),G=a(80),_=a(79),q=a(27),M=a(137),W=a(81),J=a.n(W),Y=a(136),$=a(130),K=a(138),Q=(a(124),{display:"grid",gridTemplateColumns:"3fr 31fr 8fr",padding:"0"}),X={color:"#797979",textAlign:"center",padding:"15px"},Z={padding:"15px",borderLeft:"1px solid rgba(0, 0, 0, 0.125)",borderRight:"1px solid rgba(0, 0, 0, 0.125)"},ee={color:"#797979",padding:"0 15px",margin:"15px 0",display:"inline-block"},te=function(e){var t=e.id,a=e.name,o=e.status,c=e.deleteTask,l=e.changeStatus,i=e.setEditTaskId,d=e.setTaskName,u=e.moveTask,p=(e.index,e.findTask),m=e.onDragEnd,g=e.priority,f=p(t).index,h=Object(K.a)({item:{type:"task",id:t,originalIndex:f},collect:function(e){return{isDragging:e.isDragging()}},end:function(e,t){var a=t.getItem(),n=a.id,r=a.originalIndex,o=t.didDrop();o||u(n,r),o&&m()}}),E=Object(s.a)(h,2),b=E[0].isDragging,x=E[1],y=Object(M.a)({accept:"task",canDrop:function(){return!1},hover:function(e){var a=e.id;if(a!==t){var n=p(t).index;u(a,n)}}}),k=Object(s.a)(y,2)[1],v=b?0:1,j=Object(n.useState)(!1),w=Object(s.a)(j,2),O=w[0],S=w[1],T=function(){l(t,o)},I=r.a.createElement(N.a,{style:{cursor:"pointer"},icon:q.c,onClick:function(){i(t),d(a)}}),C=r.a.createElement(N.a,{style:{cursor:"pointer"},icon:q.e,onClick:function(){c(t)}}),R=r.a.createElement(N.a,{style:{cursor:"pointer"},icon:F.c}),A=r.a.createElement(N.a,{icon:q.b,style:{cursor:"pointer"},onClick:T}),P=r.a.createElement(N.a,{icon:q.d,style:{cursor:"pointer"},onClick:T});return r.a.createElement(Y.a.Item,{style:Object(V.a)({},Q,{opacity:v}),className:"task-item",onMouseEnter:function(){return S(!0)},onMouseLeave:function(){return S(!1)},ref:function(e){return x(k(e))}},r.a.createElement("div",{style:X},o?A:P),r.a.createElement("div",{style:Z},a,r.a.createElement("span",{style:{fontSize:"12px",color:"gray"}},"priority: ",g)),r.a.createElement($.a,{in:O,timeout:300,classNames:"buttons",unmountOnExit:!0},r.a.createElement("div",null,r.a.createElement("span",{style:ee},R),r.a.createElement("span",{style:Object(V.a)({},ee,{borderLeft:"1px solid #797979",borderRight:"1px solid #797979"})},I),r.a.createElement("span",{style:ee},C))))},ae={marginTop:"50px",borderRadius:"0 0 30px 30px",border:"1px solid gray",overflow:"hidden",borderRight:"none",borderTop:"none"},ne={color:"#fff",fontSize:"26px",background:"linear-gradient(#4c7fbe, #355fa2)",borderRadius:"0"},re={fontSize:"22px",color:"#344b74",marginRight:"20px"},oe={margin:"15px 0",borderRadius:"2px 0 0 2px",borderRight:"none",boxSizing:"border-box",height:"auto"},ce={background:"linear-gradient(#e2e2e2, #c9c9c9)",padding:0},se={color:"#5a9073",fontSize:"36px",lineHeight:0,margin:"15px auto"},le={display:"grid",gridTemplateColumns:"3fr 31fr 8fr"},ie={background:"linear-gradient(#91c8ac, #548d6c)",margin:"15px 15px 15px 0",border:"1px solid #ced4da",borderLeft:"none",borderRadius:"0 2px 2px 0",boxSizing:"border-box",width:"170px"},de=function(e){var t=e.id,a=e.name,o=e.removeProject,c=e.setProjectName,l=e.setEditId,d=e.setModalProjectShow,u=Object(n.useState)(null),p=Object(s.a)(u,2),m=p[0],g=p[1],f=Object(n.useState)(""),E=Object(s.a)(f,2),b=E[0],x=E[1],y=Object(n.useState)(null),k=Object(s.a)(y,2),v=k[0],j=k[1],w=function(e){return e.sort((function(e,t){return e.priority>t.priority?1:-1})),e},S=function(e){var t=(e||m).map((function(e,t){return e.priority=t+1,e}));O.post("/update-priority",{tasks:t}).then((function(e){console.log(e)})).catch((function(e){console.log(e)})),g(t)};Object(n.useEffect)((function(){O.get("/tasks/"+t).then((function(e){g(w(e.data.tasks))})).catch()}),[t]);var T=function(e,a){O.post("/task-status",{projectId:t,id:e,status:a}).then((function(e){g(w(e.data.tasks))})).catch((function(e){console.log(e)}))},I=r.a.createElement(N.a,{icon:q.a}),C=r.a.createElement(N.a,{style:{cursor:"pointer"},icon:F.a,onClick:function(){c(a),l(t),d(!0)}}),R=r.a.createElement(N.a,{style:{cursor:"pointer"},icon:q.e,onClick:function(){o(t)}}),A=r.a.createElement(N.a,{icon:F.b}),P=function(e){O.delete("/task/".concat(t,"/").concat(e)).then((function(e){S(w(e.data.tasks))})).catch((function(e){console.log(e)}))},B=function(){S()},z=function(e,t){var a=D(e),n=a.task,r=a.index;g(J()(m,{$splice:[[r,1],[t,0,n]]}))},D=function(e){var t=m.filter((function(t){return"".concat(t._id)===e}))[0];return{task:t,index:m.indexOf(t)}},L=Object(M.a)({accept:"task"}),W=Object(s.a)(L,2)[1];return r.a.createElement(H.a,{style:ae},r.a.createElement(H.a.Header,{style:ne},r.a.createElement(U.a,null,r.a.createElement(G.a,{lg:10},r.a.createElement("span",{style:re},I),a),r.a.createElement(G.a,{lg:2},r.a.createElement("p",{style:{textAlign:"end"}},r.a.createElement("span",{style:Object(V.a)({},re,{borderRight:"1px solid #344b74",paddingRight:"20px"})},C),r.a.createElement("span",{style:re},R))))),r.a.createElement(H.a.Body,{style:ce},r.a.createElement("div",{style:le},r.a.createElement("div",{style:se},A),r.a.createElement("div",null,r.a.createElement(_.a,{style:oe,placeholder:"Enter task name...",value:b,onChange:function(e){v&&!e.target.value&&j(null),e.target.value.length<20&&x(e.target.value)}})),r.a.createElement("div",null,r.a.createElement(i.a,{style:ie,onClick:v?function(){b.trim().length>0&&O.post("/update-task",{id:v,projectId:t,name:b.trim()}).then((function(e){x(""),j(null),g(w(e.data.tasks))})).catch((function(e){console.log(e)}))}:function(){b.trim().length>0&&O.post("/tasks",{projectId:t,name:b.trim(),priority:m.length+1}).then((function(e){x(""),g(w(e.data.tasks))})).catch((function(e){console.log(e)}))}},v?"Edit task":"Add task")))),m?0===m.length?r.a.createElement("p",{style:{textAlign:"center",padding:"50px"}},"There are no tasks, add new one"):r.a.createElement("div",{ref:W},m.map((function(e,t){return r.a.createElement(te,{key:e._id,id:e._id,name:e.name,status:e.status,deleteTask:P,changeStatus:T,setEditTaskId:j,setTaskName:x,moveTask:z,index:t,findTask:D,onDragEnd:B,priority:e.priority})}))):r.a.createElement(h,null))},ue=a(91),pe=a(134),me=function(e){var t=e.projectName,a=e.setProjectName,o=e.addProject,c=e.updateProject,l=e.editId,d=e.setEditId,u=Object(ue.a)(e,["projectName","setProjectName","addProject","updateProject","editId","setEditId"]),m=Object(n.useState)(!1),g=Object(s.a)(m,2),f=g[0],h=g[1];return r.a.createElement(pe.a,Object.assign({},u,{size:"lg","aria-labelledby":"contained-modal-title-vcenter",centered:!0}),r.a.createElement(pe.a.Header,{closeButton:!0},r.a.createElement(pe.a.Title,{id:"contained-modal-title-vcenter"},l?"EditProject":"Create new Project")),r.a.createElement(pe.a.Body,null,r.a.createElement(p.a.Group,{controlId:"formBasicName"},r.a.createElement(p.a.Label,null,"Project name"),r.a.createElement(p.a.Control,{type:"text",placeholder:"Enter project name",value:t,onChange:function(e){e.target.value.trim().length<1?h(!0):h(!1),e.target.value.length<=30&&a(e.target.value)},isInvalid:f}),r.a.createElement(p.a.Control.Feedback,{type:"invalid"},"Invalid project name!"))),r.a.createElement(pe.a.Footer,null,r.a.createElement(i.a,{onClick:l?function(){f||(c(),a(""),u.onHide(),d(null))}:function(){f||(o(t),a(""),u.onHide())}},l?"Edit":"Add"),r.a.createElement(i.a,{onClick:u.onHide},"Close")))},ge=r.a.createElement(N.a,{icon:F.b}),fe={margin:"50px auto",textAlign:"center",display:"block",fontSize:"20px",fontWeight:"bold",background:"linear-gradient(#4c7fbe, #355fa2)"},he={color:"#344b74"},Ee={textAlign:"center",color:"#303030",fontSize:"20px",margin:"50px"},be=function(e){var t=e.isAuth,a=Object(d.e)(),o=Object(n.useState)(null),c=Object(s.a)(o,2),l=c[0],u=c[1],p=Object(n.useState)(!1),m=Object(s.a)(p,2),g=m[0],f=m[1],E=Object(n.useState)(null),b=Object(s.a)(E,2),x=b[0],y=b[1],k=Object(n.useState)(""),v=Object(s.a)(k,2),j=v[0],w=v[1];t||a.push("/signin"),Object(n.useEffect)((function(){O.get("/projects").then((function(e){u(e.data.projects)})).catch((function(e){console.log(e)}))}),[]);var S=function(e){O.delete("/projects/"+e).then((function(e){u(e.data.projects)})).catch((function(e){console.log(e)}))};return l?r.a.createElement(r.a.Fragment,null,r.a.createElement(D.a,{backend:L.a},l?r.a.createElement("div",null,0===l.length?r.a.createElement("p",{style:Ee},"There are no projects, add new one"):l.map((function(e){return r.a.createElement(de,{key:e._id,id:e._id,name:e.name,setProjectName:w,removeProject:S,setEditId:y,setModalProjectShow:f})})),r.a.createElement(i.a,{style:fe,onClick:function(){f(!0)}},r.a.createElement("span",{style:he},ge)," Add TODO List ")):r.a.createElement(h,null),r.a.createElement(me,{show:g,onHide:function(){y(null),w(""),f(!1)},addProject:function(e){console.log(e),O.post("/projects",{name:e}).then((function(e){u(e.data.projects)})).catch((function(e){console.log(e)}))},editId:x,setEditId:y,projectName:j,setProjectName:w,updateProject:function(){O.post("/update-project",{id:x,name:j}).then((function(e){u(e.data.projects)})).catch((function(e){console.log(e)}))}}))):r.a.createElement(h,null)},xe=a(88),ye={zIndex:"-100",position:"fixed",top:0,left:0,right:0,bottom:0,background:"url(".concat(a.n(xe).a,") no-repeat center"),backgroundSize:"cover",filter:"blur(30px)"},ke={color:"#303030",textAlign:"center",marginTop:"50px",textTransform:"uppercase"},ve={fontSize:"20px"},je={background:"linear-gradient(#e2e2e2, #c9c9c9)",padding:"20px",display:"flex",justifyContent:"space-between",borderRadius:"0 0 10px 10px",color:"#303030"},we={background:"linear-gradient(#91c8ac, #548d6c)",border:"none"};var Oe=function(){var e=Object(n.useState)(null),t=Object(s.a)(e,2),a=t[0],o=t[1],c=Object(n.useState)(""),u=Object(s.a)(c,2),p=u[0],m=u[1];Object(n.useEffect)((function(){O.get("/check-token").then((function(e){m(e.data.username),o(!0)})).catch((function(e){o(!1)}))}),[]);var g=function(e){m(e),o(!0)};return r.a.createElement("div",null,r.a.createElement(l.a,null,a&&r.a.createElement("header",{style:je},r.a.createElement("h4",null,"Hello, ",p),r.a.createElement(i.a,{style:we,onClick:function(){O.post("/logout").then((function(e){O.defaults.headers.common.Authorization="",w.clearToken(),m(""),o(!1),console.log(e)})).catch((function(e){console.log(e)}))}},"Log out")),r.a.createElement("div",{style:ke},r.a.createElement("h1",null,"Simple TODO List"),r.a.createElement("p",{style:ve},"From RubyGarage")),r.a.createElement(d.a,{path:"/signin",component:function(){return r.a.createElement(S,{isAuth:a,setIsAuth:g})},exact:!0}),r.a.createElement(d.a,{path:"/signup",component:function(){return r.a.createElement(z,{isAuth:a})},exact:!0}),r.a.createElement(d.a,{path:"/",component:function(){return r.a.createElement(be,{isAuth:a})},exact:!0})),r.a.createElement("div",{style:ye}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(125);c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(m.a,null,r.a.createElement(Oe,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},88:function(e,t,a){e.exports=a.p+"static/media/bg.1de37893.jpg"},95:function(e,t,a){e.exports=a(126)}},[[95,1,2]]]);
//# sourceMappingURL=main.64c07c4e.chunk.js.map